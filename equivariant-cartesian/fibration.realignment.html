<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>fibration.realignment</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-

Realignment for fibrations along cofibrations.

First we prove that the notion of fibration is /relatively acyclic/. We use this in
combination with realignment for the internal extensional type theory (see
axiom.realignment) to prove realignment for fibrations.

-}</a>
<a id="272" class="Keyword">module</a> <a id="279" href="fibration.realignment.html" class="Module">fibration.realignment</a> <a id="301" class="Keyword">where</a>

<a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="basic.html" class="Module">basic</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="internal-extensional-type-theory.html" class="Module">internal-extensional-type-theory</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="axiom.html" class="Module">axiom</a>
<a id="389" class="Keyword">open</a> <a id="394" class="Keyword">import</a> <a id="401" href="cofibration.html" class="Module">cofibration</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="fibration.fibration.html" class="Module">fibration.fibration</a>

<a id="446" class="Keyword">private</a> <a id="454" class="Keyword">variable</a>
  <a id="465" href="fibration.realignment.html#465" class="Generalizable">ℓ</a> <a id="467" class="Symbol">:</a> <a id="469" href="Agda.Primitive.html#742" class="Postulate">Level</a>
  <a id="477" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="479" href="fibration.realignment.html#479" class="Generalizable">Δ</a> <a id="481" class="Symbol">:</a> <a id="483" href="basic.prelude.html#227" class="Primitive">Type</a> <a id="488" href="fibration.realignment.html#465" class="Generalizable">ℓ</a>

<a id="491" class="Comment">------------------------------------------------------------------------------------------</a>
<a id="582" class="Comment">-- Relative acyclicity, i.e. realigning fibration structures.</a>
<a id="644" class="Comment">--</a>
<a id="647" class="Comment">-- Given</a>
<a id="656" class="Comment">--</a>
<a id="659" class="Comment">-- ∘ a fibration B over Γ,</a>
<a id="686" class="Comment">-- ∘ a cofibration φ over Γ,</a>
<a id="715" class="Comment">-- ∘ a &quot;partial&quot; fibration structure α on the restricted family B ↾ φ over Γ ▷[ φ ] ,</a>
<a id="801" class="Comment">--</a>
<a id="804" class="Comment">-- there exists a fibration structure on B that restricts on φ to α.</a>
<a id="873" class="Comment">------------------------------------------------------------------------------------------</a>

<a id="965" class="Comment">--↓ Construction of lifts on for the realigned fibration structure.</a>

<a id="1034" class="Keyword">module</a> <a id="RealignLift"></a><a id="1041" href="fibration.realignment.html#1041" class="Module">RealignLift</a> <a id="1053" class="Symbol">{</a><a id="1054" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1056" href="fibration.realignment.html#1056" class="Bound">r</a><a id="1057" class="Symbol">}</a> <a id="1059" class="Symbol">(</a><a id="1060" href="fibration.realignment.html#1060" class="Bound">φ</a> <a id="1062" class="Symbol">:</a> <a id="1064" href="axiom.shape.html#626" class="Postulate Operator">⟨</a> <a id="1066" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1068" href="axiom.shape.html#626" class="Postulate Operator">⟩</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="1075" class="Symbol">)</a>
  <a id="1079" class="Symbol">{</a><a id="1080" href="fibration.realignment.html#1080" class="Bound">B</a> <a id="1082" class="Symbol">:</a> <a id="1084" href="axiom.shape.html#626" class="Postulate Operator">⟨</a> <a id="1086" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1088" href="axiom.shape.html#626" class="Postulate Operator">⟩</a> <a id="1090" class="Symbol">→</a> <a id="1092" href="basic.prelude.html#227" class="Primitive">Type</a> <a id="1097" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="1098" class="Symbol">}</a> <a id="1100" class="Symbol">(</a><a id="1101" href="fibration.realignment.html#1101" class="Bound">β</a> <a id="1103" class="Symbol">:</a> <a id="1105" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="1112" href="fibration.realignment.html#1080" class="Bound">B</a><a id="1113" class="Symbol">)</a>
  <a id="1117" class="Symbol">(</a><a id="1118" href="fibration.realignment.html#1118" class="Bound">α</a> <a id="1120" class="Symbol">:</a> <a id="1122" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="1129" class="Symbol">(</a><a id="1130" href="fibration.realignment.html#1080" class="Bound">B</a> <a id="1132" href="cofibration.html#783" class="Function Operator">↾</a> <a id="1134" href="fibration.realignment.html#1060" class="Bound">φ</a><a id="1135" class="Symbol">))</a>
  <a id="1140" class="Symbol">(</a><a id="1141" href="fibration.realignment.html#1141" class="Bound">box</a> <a id="1145" class="Symbol">:</a> <a id="1147" href="fibration.fibration.html#902" class="Record">OpenBox</a> <a id="1155" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1157" href="fibration.realignment.html#1080" class="Bound">B</a> <a id="1159" href="fibration.realignment.html#1056" class="Bound">r</a><a id="1160" class="Symbol">)</a>
  <a id="1164" class="Keyword">where</a>

  <a id="1173" class="Comment">--↓ First, use the partial fibration structure to construct a lift when the cofibration</a>
  <a id="1263" class="Comment">--↓ ∀φ holds.</a>

  <a id="RealignLift.fillPartial"></a><a id="1280" href="fibration.realignment.html#1280" class="Function">fillPartial</a> <a id="1292" class="Symbol">:</a> <a id="1294" href="axiom.cofibration.html#556" class="Postulate Operator">[</a> <a id="1296" href="axiom.cofibration.html#2216" class="Postulate">all</a> <a id="1300" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1302" href="fibration.realignment.html#1060" class="Bound">φ</a> <a id="1304" href="axiom.cofibration.html#556" class="Postulate Operator">]</a> <a id="1306" class="Symbol">→</a> <a id="1308" href="fibration.fibration.html#4272" class="Record">Filler</a> <a id="1315" href="fibration.realignment.html#1141" class="Bound">box</a>
  <a id="1321" href="fibration.realignment.html#1280" class="Function">fillPartial</a> <a id="1333" href="fibration.realignment.html#1333" class="Bound">u</a> <a id="1335" class="Symbol">=</a> <a id="1337" href="fibration.realignment.html#1118" class="Bound">α</a> <a id="1339" class="Symbol">.</a><a id="1340" href="fibration.fibration.html#7300" class="Field">lift</a> <a id="1345" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1347" class="Symbol">(</a><a id="1348" href="basic.function.html#279" class="Function">id</a> <a id="1351" href="internal-extensional-type-theory.html#1803" class="Function Operator">,,</a> <a id="1354" href="fibration.realignment.html#1333" class="Bound">u</a><a id="1355" class="Symbol">)</a> <a id="1357" href="fibration.realignment.html#1056" class="Bound">r</a> <a id="1359" href="fibration.realignment.html#1141" class="Bound">box</a>

  <a id="1366" class="Comment">--↓ Use the total fibration structure to construct a lift for the original box that</a>
  <a id="1452" class="Comment">--↓ also agrees on ∀φ with the partial lift just constructed.</a>

  <a id="RealignLift.boxTotal"></a><a id="1517" href="fibration.realignment.html#1517" class="Function">boxTotal</a> <a id="1526" class="Symbol">:</a> <a id="1528" href="fibration.fibration.html#902" class="Record">OpenBox</a> <a id="1536" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1538" href="fibration.realignment.html#1080" class="Bound">B</a> <a id="1540" href="fibration.realignment.html#1056" class="Bound">r</a>
  <a id="1544" href="fibration.realignment.html#1517" class="Function">boxTotal</a> <a id="1553" class="Symbol">=</a>
    <a id="1559" href="fibration.fibration.html#1518" class="Function">addToTube</a>
      <a id="1575" href="fibration.realignment.html#1141" class="Bound">box</a>
      <a id="1585" class="Symbol">(</a><a id="1586" href="axiom.cofibration.html#2216" class="Postulate">all</a> <a id="1590" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1592" href="fibration.realignment.html#1060" class="Bound">φ</a><a id="1593" class="Symbol">)</a>
      <a id="1601" class="Symbol">(λ</a> <a id="1604" href="fibration.realignment.html#1604" class="Bound">i</a> <a id="1606" href="fibration.realignment.html#1606" class="Bound">u</a> <a id="1608" class="Symbol">→</a> <a id="1610" href="fibration.realignment.html#1280" class="Function">fillPartial</a> <a id="1622" href="fibration.realignment.html#1606" class="Bound">u</a> <a id="1624" class="Symbol">.</a><a id="1625" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="1630" href="fibration.realignment.html#1604" class="Bound">i</a><a id="1631" class="Symbol">)</a>
      <a id="1639" class="Symbol">(λ</a> <a id="1642" href="fibration.realignment.html#1642" class="Bound">v</a> <a id="1644" class="Symbol">→</a> <a id="1646" href="fibration.realignment.html#1280" class="Function">fillPartial</a> <a id="1658" href="fibration.realignment.html#1642" class="Bound">v</a> <a id="1660" class="Symbol">.</a><a id="1661" href="fibration.fibration.html#4456" class="Field">cap≡</a><a id="1665" class="Symbol">)</a>

  <a id="RealignLift.fillTotal"></a><a id="1670" href="fibration.realignment.html#1670" class="Function">fillTotal</a> <a id="1680" class="Symbol">=</a> <a id="1682" href="fibration.realignment.html#1101" class="Bound">β</a> <a id="1684" class="Symbol">.</a><a id="1685" href="fibration.fibration.html#7300" class="Field">lift</a> <a id="1690" href="fibration.realignment.html#1054" class="Bound">S</a> <a id="1692" href="basic.function.html#279" class="Function">id</a> <a id="1695" href="fibration.realignment.html#1056" class="Bound">r</a> <a id="1697" href="fibration.realignment.html#1517" class="Function">boxTotal</a>

  <a id="1709" class="Comment">--↓ Extract a filler for the original lifting problem.</a>

  <a id="RealignLift.filler"></a><a id="1767" href="fibration.realignment.html#1767" class="Function">filler</a> <a id="1774" class="Symbol">:</a> <a id="1776" href="fibration.fibration.html#4272" class="Record">Filler</a> <a id="1783" href="fibration.realignment.html#1141" class="Bound">box</a>
  <a id="1789" href="fibration.realignment.html#1767" class="Function">filler</a> <a id="1796" class="Symbol">.</a><a id="1797" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="1802" href="fibration.realignment.html#1802" class="Bound">s</a> <a id="1804" class="Symbol">.</a><a id="1805" href="cofibration.html#2023" class="Field">out</a> <a id="1809" class="Symbol">=</a> <a id="1811" href="fibration.realignment.html#1670" class="Function">fillTotal</a> <a id="1821" class="Symbol">.</a><a id="1822" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="1827" href="fibration.realignment.html#1802" class="Bound">s</a> <a id="1829" class="Symbol">.</a><a id="1830" href="cofibration.html#2023" class="Field">out</a>
  <a id="1836" href="fibration.realignment.html#1767" class="Function">filler</a> <a id="1843" class="Symbol">.</a><a id="1844" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="1849" href="fibration.realignment.html#1849" class="Bound">s</a> <a id="1851" class="Symbol">.</a><a id="1852" href="cofibration.html#2035" class="Field">out≡</a> <a id="1857" href="fibration.realignment.html#1857" class="Bound">v</a> <a id="1859" class="Symbol">=</a> <a id="1861" href="fibration.realignment.html#1670" class="Function">fillTotal</a> <a id="1871" class="Symbol">.</a><a id="1872" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="1877" href="fibration.realignment.html#1849" class="Bound">s</a> <a id="1879" class="Symbol">.</a><a id="1880" href="cofibration.html#2035" class="Field">out≡</a> <a id="1885" class="Symbol">(</a><a id="1886" href="axiom.cofibration.html#1657" class="Postulate">∨l</a> <a id="1889" href="fibration.realignment.html#1857" class="Bound">v</a><a id="1890" class="Symbol">)</a>
  <a id="1894" href="fibration.realignment.html#1767" class="Function">filler</a> <a id="1901" class="Symbol">.</a><a id="1902" href="fibration.fibration.html#4456" class="Field">cap≡</a> <a id="1907" class="Symbol">=</a> <a id="1909" href="fibration.realignment.html#1670" class="Function">fillTotal</a> <a id="1919" class="Symbol">.</a><a id="1920" href="fibration.fibration.html#4456" class="Field">cap≡</a>

<a id="1926" class="Comment">--↓ Proof that the lifts satisfy the equivariance condition.</a>
<a id="1987" class="Comment">--↓ This proof relies on the invariance of ∀ under shape homomorphisms, i.e., that for</a>
<a id="2074" class="Comment">--↓ any shape homorphism σ : S → T the cofibrations ∀t:T.φ(t) and ∀s:S.φ(σ(s)) are equal.</a>

<a id="2165" class="Keyword">module</a> <a id="RealignVary"></a><a id="2172" href="fibration.realignment.html#2172" class="Module">RealignVary</a> <a id="2184" class="Symbol">{</a><a id="2185" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2187" href="fibration.realignment.html#2187" class="Bound">T</a><a id="2188" class="Symbol">}</a> <a id="2190" class="Symbol">(</a><a id="2191" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2193" class="Symbol">:</a> <a id="2195" href="axiom.shape.html#1245" class="Postulate Operator">Shape[</a> <a id="2202" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2204" href="axiom.shape.html#1245" class="Postulate Operator">,</a> <a id="2206" href="fibration.realignment.html#2187" class="Bound">T</a> <a id="2208" href="axiom.shape.html#1245" class="Postulate Operator">]</a><a id="2209" class="Symbol">)</a> <a id="2211" class="Symbol">{</a><a id="2212" href="fibration.realignment.html#2212" class="Bound">r</a><a id="2213" class="Symbol">}</a>
  <a id="2217" class="Symbol">(</a><a id="2218" href="fibration.realignment.html#2218" class="Bound">φ</a> <a id="2220" class="Symbol">:</a> <a id="2222" href="axiom.shape.html#626" class="Postulate Operator">⟨</a> <a id="2224" href="fibration.realignment.html#2187" class="Bound">T</a> <a id="2226" href="axiom.shape.html#626" class="Postulate Operator">⟩</a> <a id="2228" class="Symbol">→</a> <a id="2230" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="2233" class="Symbol">)</a>
  <a id="2237" class="Symbol">{</a><a id="2238" href="fibration.realignment.html#2238" class="Bound">B</a> <a id="2240" class="Symbol">:</a> <a id="2242" href="axiom.shape.html#626" class="Postulate Operator">⟨</a> <a id="2244" href="fibration.realignment.html#2187" class="Bound">T</a> <a id="2246" href="axiom.shape.html#626" class="Postulate Operator">⟩</a> <a id="2248" class="Symbol">→</a> <a id="2250" href="basic.prelude.html#227" class="Primitive">Type</a> <a id="2255" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="2256" class="Symbol">}</a> <a id="2258" class="Symbol">(</a><a id="2259" href="fibration.realignment.html#2259" class="Bound">β</a> <a id="2261" class="Symbol">:</a> <a id="2263" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="2270" href="fibration.realignment.html#2238" class="Bound">B</a><a id="2271" class="Symbol">)</a>
  <a id="2275" class="Symbol">(</a><a id="2276" href="fibration.realignment.html#2276" class="Bound">α</a> <a id="2278" class="Symbol">:</a> <a id="2280" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="2287" class="Symbol">(</a><a id="2288" href="fibration.realignment.html#2238" class="Bound">B</a> <a id="2290" href="cofibration.html#783" class="Function Operator">↾</a> <a id="2292" href="fibration.realignment.html#2218" class="Bound">φ</a><a id="2293" class="Symbol">))</a>
  <a id="2298" class="Symbol">(</a><a id="2299" href="fibration.realignment.html#2299" class="Bound">box</a> <a id="2303" class="Symbol">:</a> <a id="2305" href="fibration.fibration.html#902" class="Record">OpenBox</a> <a id="2313" href="fibration.realignment.html#2187" class="Bound">T</a> <a id="2315" href="fibration.realignment.html#2238" class="Bound">B</a> <a id="2317" class="Symbol">(</a><a id="2318" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2320" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2322" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a> <a id="2324" href="fibration.realignment.html#2212" class="Bound">r</a><a id="2325" class="Symbol">))</a>
  <a id="2330" class="Keyword">where</a>

  <a id="2339" class="Keyword">module</a> <a id="RealignVary.T"></a><a id="2346" href="fibration.realignment.html#2346" class="Module">T</a> <a id="2348" class="Symbol">=</a> <a id="2350" href="fibration.realignment.html#1041" class="Module">RealignLift</a> <a id="2362" href="fibration.realignment.html#2218" class="Bound">φ</a> <a id="2364" href="fibration.realignment.html#2259" class="Bound">β</a> <a id="2366" href="fibration.realignment.html#2276" class="Bound">α</a> <a id="2368" href="fibration.realignment.html#2299" class="Bound">box</a>
  <a id="2374" class="Keyword">module</a> <a id="RealignVary.S"></a><a id="2381" href="fibration.realignment.html#2381" class="Module">S</a> <a id="2383" class="Symbol">=</a> <a id="2385" href="fibration.realignment.html#1041" class="Module">RealignLift</a> <a id="2397" class="Symbol">(</a><a id="2398" href="fibration.realignment.html#2218" class="Bound">φ</a> <a id="2400" href="basic.function.html#441" class="Function Operator">∘</a> <a id="2402" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2404" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2406" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a><a id="2407" class="Symbol">)</a> <a id="2409" class="Symbol">(</a><a id="2410" href="fibration.realignment.html#2259" class="Bound">β</a> <a id="2412" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="2416" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2418" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2420" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a><a id="2421" class="Symbol">)</a> <a id="2423" class="Symbol">(</a><a id="2424" href="fibration.realignment.html#2276" class="Bound">α</a> <a id="2426" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="2430" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2432" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2434" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a> <a id="2436" href="basic.sigma.html#484" class="Function Operator">×id</a><a id="2439" class="Symbol">)</a> <a id="2441" class="Symbol">(</a><a id="2442" href="fibration.fibration.html#1205" class="Function">reshapeBox</a> <a id="2453" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2455" href="fibration.realignment.html#2299" class="Bound">box</a><a id="2458" class="Symbol">)</a>

  <a id="RealignVary.eq"></a><a id="2463" href="fibration.realignment.html#2463" class="Function">eq</a> <a id="2466" class="Symbol">:</a> <a id="2468" class="Symbol">(</a><a id="2469" href="fibration.realignment.html#2469" class="Bound">s</a> <a id="2471" class="Symbol">:</a> <a id="2473" href="axiom.shape.html#626" class="Postulate Operator">⟨</a> <a id="2475" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2477" href="axiom.shape.html#626" class="Postulate Operator">⟩</a><a id="2478" class="Symbol">)</a> <a id="2480" class="Symbol">→</a> <a id="2482" href="fibration.realignment.html#1767" class="Function">T.filler</a> <a id="2491" class="Symbol">.</a><a id="2492" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="2497" class="Symbol">(</a><a id="2498" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2500" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2502" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a> <a id="2504" href="fibration.realignment.html#2469" class="Bound">s</a><a id="2505" class="Symbol">)</a> <a id="2507" class="Symbol">.</a><a id="2508" href="cofibration.html#2023" class="Field">out</a> <a id="2512" href="basic.prelude.html#239" class="Datatype Operator">≡</a> <a id="2514" href="fibration.realignment.html#1767" class="Function">S.filler</a> <a id="2523" class="Symbol">.</a><a id="2524" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="2529" href="fibration.realignment.html#2469" class="Bound">s</a> <a id="2531" class="Symbol">.</a><a id="2532" href="cofibration.html#2023" class="Field">out</a>
  <a id="2538" href="fibration.realignment.html#2463" class="Function">eq</a> <a id="2541" href="fibration.realignment.html#2541" class="Bound">s</a> <a id="2543" class="Symbol">=</a>
    <a id="2549" href="fibration.realignment.html#2259" class="Bound">β</a> <a id="2551" class="Symbol">.</a><a id="2552" href="fibration.fibration.html#7406" class="Field">vary</a> <a id="2557" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2559" href="fibration.realignment.html#2187" class="Bound">T</a> <a id="2561" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2563" href="basic.function.html#279" class="Function">id</a> <a id="2566" href="fibration.realignment.html#2212" class="Bound">r</a> <a id="2568" href="fibration.realignment.html#1517" class="Function">T.boxTotal</a> <a id="2579" href="fibration.realignment.html#2541" class="Bound">s</a>
    <a id="2585" href="basic.equality.html#1002" class="Function Operator">∙</a>
    <a id="2591" href="basic.equality.html#1460" class="Function">cong</a>
      <a id="2602" class="Symbol">(λ</a> <a id="2605" href="fibration.realignment.html#2605" class="Bound">box&#39;</a> <a id="2610" class="Symbol">→</a> <a id="2612" href="fibration.realignment.html#2259" class="Bound">β</a> <a id="2614" class="Symbol">.</a><a id="2615" href="fibration.fibration.html#7300" class="Field">lift</a> <a id="2620" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2622" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2624" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2626" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a> <a id="2628" href="fibration.realignment.html#2212" class="Bound">r</a> <a id="2630" href="fibration.realignment.html#2605" class="Bound">box&#39;</a> <a id="2635" class="Symbol">.</a><a id="2636" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="2641" href="fibration.realignment.html#2541" class="Bound">s</a> <a id="2643" class="Symbol">.</a><a id="2644" href="cofibration.html#2023" class="Field">out</a><a id="2647" class="Symbol">)</a>
      <a id="2655" class="Symbol">(</a><a id="2656" href="fibration.fibration.html#10368" class="Function">boxExt</a>
        <a id="2671" class="Symbol">(</a><a id="2672" href="basic.equality.html#1460" class="Function">cong</a> <a id="2677" class="Symbol">(</a><a id="2678" href="fibration.realignment.html#2299" class="Bound">box</a> <a id="2682" class="Symbol">.</a><a id="2683" href="fibration.fibration.html#1006" class="Field">cof</a> <a id="2687" href="axiom.cofibration.html#1632" class="Postulate Operator">∨_</a><a id="2689" class="Symbol">)</a> <a id="2691" class="Symbol">(</a><a id="2692" href="axiom.cofibration.html#3222" class="Postulate">allEquivariant</a> <a id="2707" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2709" href="fibration.realignment.html#2218" class="Bound">φ</a><a id="2710" class="Symbol">))</a>
        <a id="2721" class="Symbol">(λ</a> <a id="2724" href="fibration.realignment.html#2724" class="Bound">i</a> <a id="2726" class="Symbol">→</a> <a id="2728" href="cofibration.html#4439" class="Function">takeOutCof</a> <a id="2739" class="Symbol">(</a><a id="2740" href="fibration.realignment.html#2299" class="Bound">box</a> <a id="2744" class="Symbol">.</a><a id="2745" href="fibration.fibration.html#1006" class="Field">cof</a><a id="2748" class="Symbol">)</a> <a id="2750" class="Symbol">(</a><a id="2751" href="axiom.cofibration.html#2216" class="Postulate">all</a> <a id="2755" href="fibration.realignment.html#2187" class="Bound">T</a> <a id="2757" href="fibration.realignment.html#2218" class="Bound">φ</a><a id="2758" class="Symbol">)</a> <a id="2760" class="Symbol">(</a><a id="2761" href="axiom.cofibration.html#2216" class="Postulate">all</a> <a id="2765" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2767" class="Symbol">(</a><a id="2768" href="fibration.realignment.html#2218" class="Bound">φ</a> <a id="2770" href="basic.function.html#441" class="Function Operator">∘</a> <a id="2772" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2774" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2776" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a><a id="2777" class="Symbol">))</a>
          <a id="2790" class="Symbol">(λ</a> <a id="2793" href="fibration.realignment.html#2793" class="Bound">_</a> <a id="2795" class="Symbol">→</a> <a id="2797" href="basic.prelude.html#302" class="InductiveConstructor">refl</a><a id="2801" class="Symbol">)</a>
          <a id="2813" class="Symbol">(λ</a> <a id="2816" href="fibration.realignment.html#2816" class="Bound">uS</a> <a id="2819" href="fibration.realignment.html#2819" class="Bound">uT</a> <a id="2822" class="Symbol">→</a>
            <a id="2836" href="fibration.realignment.html#2276" class="Bound">α</a> <a id="2838" class="Symbol">.</a><a id="2839" href="fibration.fibration.html#7406" class="Field">vary</a> <a id="2844" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2846" href="fibration.realignment.html#2187" class="Bound">T</a> <a id="2848" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2850" class="Symbol">(</a><a id="2851" href="basic.function.html#279" class="Function">id</a> <a id="2854" href="internal-extensional-type-theory.html#1803" class="Function Operator">,,</a> <a id="2857" href="fibration.realignment.html#2816" class="Bound">uS</a><a id="2859" class="Symbol">)</a> <a id="2861" href="fibration.realignment.html#2212" class="Bound">r</a> <a id="2863" href="fibration.realignment.html#2299" class="Bound">box</a> <a id="2867" href="fibration.realignment.html#2724" class="Bound">i</a>
            <a id="2881" href="basic.equality.html#1002" class="Function Operator">∙</a> <a id="2883" href="basic.equality.html#1460" class="Function">cong</a> <a id="2888" class="Symbol">(λ</a> <a id="2891" href="fibration.realignment.html#2891" class="Bound">w</a> <a id="2893" class="Symbol">→</a> <a id="2895" href="fibration.realignment.html#2276" class="Bound">α</a> <a id="2897" class="Symbol">.</a><a id="2898" href="fibration.fibration.html#7300" class="Field">lift</a> <a id="2903" href="fibration.realignment.html#2185" class="Bound">S</a> <a id="2905" class="Symbol">(</a><a id="2906" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="2908" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2910" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a> <a id="2912" href="internal-extensional-type-theory.html#1803" class="Function Operator">,,</a> <a id="2915" href="fibration.realignment.html#2891" class="Bound">w</a><a id="2916" class="Symbol">)</a> <a id="2918" href="fibration.realignment.html#2212" class="Bound">r</a> <a id="2920" class="Symbol">(</a><a id="2921" href="fibration.fibration.html#1205" class="Function">reshapeBox</a> <a id="2932" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="2934" href="fibration.realignment.html#2299" class="Bound">box</a><a id="2937" class="Symbol">)</a> <a id="2939" class="Symbol">.</a><a id="2940" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="2945" href="fibration.realignment.html#2724" class="Bound">i</a> <a id="2947" class="Symbol">.</a><a id="2948" href="cofibration.html#2023" class="Field">out</a><a id="2951" class="Symbol">)</a>
              <a id="2967" class="Symbol">(</a><a id="2968" href="axiom.funext.html#353" class="Postulate">funExt</a> <a id="2975" class="Symbol">λ</a> <a id="2977" href="fibration.realignment.html#2977" class="Bound">s</a> <a id="2979" class="Symbol">→</a> <a id="2981" href="cofibration.html#1173" class="Function">cofIsStrictProp&#39;</a> <a id="2998" class="Symbol">(</a><a id="2999" href="fibration.realignment.html#2218" class="Bound">φ</a> <a id="3001" class="Symbol">(</a><a id="3002" href="axiom.shape.html#1281" class="Postulate Operator">⟪</a> <a id="3004" href="fibration.realignment.html#2191" class="Bound">σ</a> <a id="3006" href="axiom.shape.html#1281" class="Postulate Operator">⟫</a> <a id="3008" href="fibration.realignment.html#2977" class="Bound">s</a><a id="3009" class="Symbol">)))))</a>
        <a id="3023" href="basic.prelude.html#302" class="InductiveConstructor">refl</a><a id="3027" class="Symbol">)</a>

<a id="3030" class="Keyword">opaque</a>
  <a id="3039" class="Comment">--↓ Definition of the realigned fibration structure.</a>

  <a id="realignFibStr"></a><a id="3095" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="3109" class="Symbol">:</a> <a id="3111" class="Symbol">(</a><a id="3112" href="fibration.realignment.html#3112" class="Bound">φ</a> <a id="3114" class="Symbol">:</a> <a id="3116" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="3118" class="Symbol">→</a> <a id="3120" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="3123" class="Symbol">)</a>
    <a id="3129" class="Symbol">{</a><a id="3130" href="fibration.realignment.html#3130" class="Bound">B</a> <a id="3132" class="Symbol">:</a> <a id="3134" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="3136" class="Symbol">→</a> <a id="3138" href="basic.prelude.html#227" class="Primitive">Type</a> <a id="3143" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="3144" class="Symbol">}</a> <a id="3146" class="Symbol">(</a><a id="3147" href="fibration.realignment.html#3147" class="Bound">β</a> <a id="3149" class="Symbol">:</a> <a id="3151" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="3158" href="fibration.realignment.html#3130" class="Bound">B</a><a id="3159" class="Symbol">)</a>
    <a id="3165" class="Symbol">(</a><a id="3166" href="fibration.realignment.html#3166" class="Bound">α</a> <a id="3168" class="Symbol">:</a> <a id="3170" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="3177" class="Symbol">(</a><a id="3178" href="fibration.realignment.html#3130" class="Bound">B</a> <a id="3180" href="cofibration.html#783" class="Function Operator">↾</a> <a id="3182" href="fibration.realignment.html#3112" class="Bound">φ</a><a id="3183" class="Symbol">))</a>
    <a id="3190" class="Symbol">→</a> <a id="3192" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="3199" href="fibration.realignment.html#3130" class="Bound">B</a>
  <a id="3203" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="3217" href="fibration.realignment.html#3217" class="Bound">φ</a> <a id="3219" href="fibration.realignment.html#3219" class="Bound">β</a> <a id="3221" href="fibration.realignment.html#3221" class="Bound">α</a> <a id="3223" class="Symbol">.</a><a id="3224" href="fibration.fibration.html#7300" class="Field">lift</a> <a id="3229" href="fibration.realignment.html#3229" class="Bound">S</a> <a id="3231" href="fibration.realignment.html#3231" class="Bound">γ</a> <a id="3233" href="fibration.realignment.html#3233" class="Bound">r</a> <a id="3235" class="Symbol">=</a>
    <a id="3241" href="fibration.realignment.html#1767" class="Function">RealignLift.filler</a> <a id="3260" class="Symbol">(</a><a id="3261" href="fibration.realignment.html#3217" class="Bound">φ</a> <a id="3263" href="basic.function.html#441" class="Function Operator">∘</a> <a id="3265" href="fibration.realignment.html#3231" class="Bound">γ</a><a id="3266" class="Symbol">)</a> <a id="3268" class="Symbol">(</a><a id="3269" href="fibration.realignment.html#3219" class="Bound">β</a> <a id="3271" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="3275" href="fibration.realignment.html#3231" class="Bound">γ</a><a id="3276" class="Symbol">)</a> <a id="3278" class="Symbol">(</a><a id="3279" href="fibration.realignment.html#3221" class="Bound">α</a> <a id="3281" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="3285" href="fibration.realignment.html#3231" class="Bound">γ</a> <a id="3287" href="basic.sigma.html#484" class="Function Operator">×id</a><a id="3290" class="Symbol">)</a>
  <a id="3294" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="3308" href="fibration.realignment.html#3308" class="Bound">φ</a> <a id="3310" href="fibration.realignment.html#3310" class="Bound">β</a> <a id="3312" href="fibration.realignment.html#3312" class="Bound">α</a> <a id="3314" class="Symbol">.</a><a id="3315" href="fibration.fibration.html#7406" class="Field">vary</a> <a id="3320" href="fibration.realignment.html#3320" class="Bound">S</a> <a id="3322" href="fibration.realignment.html#3322" class="Bound">T</a> <a id="3324" href="fibration.realignment.html#3324" class="Bound">σ</a> <a id="3326" href="fibration.realignment.html#3326" class="Bound">γ</a> <a id="3328" href="fibration.realignment.html#3328" class="Bound">r</a> <a id="3330" class="Symbol">=</a>
    <a id="3336" href="fibration.realignment.html#2463" class="Function">RealignVary.eq</a> <a id="3351" href="fibration.realignment.html#3324" class="Bound">σ</a> <a id="3353" class="Symbol">(</a><a id="3354" href="fibration.realignment.html#3308" class="Bound">φ</a> <a id="3356" href="basic.function.html#441" class="Function Operator">∘</a> <a id="3358" href="fibration.realignment.html#3326" class="Bound">γ</a><a id="3359" class="Symbol">)</a> <a id="3361" class="Symbol">(</a><a id="3362" href="fibration.realignment.html#3310" class="Bound">β</a> <a id="3364" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="3368" href="fibration.realignment.html#3326" class="Bound">γ</a><a id="3369" class="Symbol">)</a> <a id="3371" class="Symbol">(</a><a id="3372" href="fibration.realignment.html#3312" class="Bound">α</a> <a id="3374" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="3378" href="fibration.realignment.html#3326" class="Bound">γ</a> <a id="3380" href="basic.sigma.html#484" class="Function Operator">×id</a><a id="3383" class="Symbol">)</a>

  <a id="3388" class="Comment">--↓ Proof that the realigned fibration structure indeed restricts to the given partial</a>
  <a id="3477" class="Comment">--↓ fibration structure.</a>

  <a id="realignFibStrMatch"></a><a id="3505" href="fibration.realignment.html#3505" class="Function">realignFibStrMatch</a> <a id="3524" class="Symbol">:</a> <a id="3526" class="Symbol">(</a><a id="3527" href="fibration.realignment.html#3527" class="Bound">φ</a> <a id="3529" class="Symbol">:</a> <a id="3531" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="3533" class="Symbol">→</a> <a id="3535" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="3538" class="Symbol">)</a>
    <a id="3544" class="Symbol">{</a><a id="3545" href="fibration.realignment.html#3545" class="Bound">B</a> <a id="3547" class="Symbol">:</a> <a id="3549" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="3551" class="Symbol">→</a> <a id="3553" href="basic.prelude.html#227" class="Primitive">Type</a> <a id="3558" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="3559" class="Symbol">}</a> <a id="3561" class="Symbol">(</a><a id="3562" href="fibration.realignment.html#3562" class="Bound">β</a> <a id="3564" class="Symbol">:</a> <a id="3566" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="3573" href="fibration.realignment.html#3545" class="Bound">B</a><a id="3574" class="Symbol">)</a>
    <a id="3580" class="Symbol">(</a><a id="3581" href="fibration.realignment.html#3581" class="Bound">α</a> <a id="3583" class="Symbol">:</a> <a id="3585" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="3592" class="Symbol">(</a><a id="3593" href="fibration.realignment.html#3545" class="Bound">B</a> <a id="3595" href="cofibration.html#783" class="Function Operator">↾</a> <a id="3597" href="fibration.realignment.html#3527" class="Bound">φ</a><a id="3598" class="Symbol">))</a>
    <a id="3605" class="Symbol">→</a> <a id="3607" href="fibration.realignment.html#3581" class="Bound">α</a> <a id="3609" href="basic.prelude.html#239" class="Datatype Operator">≡</a> <a id="3611" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="3625" href="fibration.realignment.html#3527" class="Bound">φ</a> <a id="3627" href="fibration.realignment.html#3562" class="Bound">β</a> <a id="3629" href="fibration.realignment.html#3581" class="Bound">α</a> <a id="3631" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="3635" href="internal-extensional-type-theory.html#2013" class="Function">𝒑</a>
  <a id="3639" href="fibration.realignment.html#3505" class="Function">realignFibStrMatch</a> <a id="3658" href="fibration.realignment.html#3658" class="Bound">φ</a> <a id="3660" href="fibration.realignment.html#3660" class="Bound">β</a> <a id="3662" href="fibration.realignment.html#3662" class="Bound">α</a> <a id="3664" class="Symbol">=</a>
    <a id="3670" href="fibration.fibration.html#11433" class="Function">FibStrExt</a> <a id="3680" class="Symbol">λ</a> <a id="3682" href="fibration.realignment.html#3682" class="Bound">S</a> <a id="3684" href="fibration.realignment.html#3684" class="Bound">γ</a> <a id="3686" href="fibration.realignment.html#3686" class="Bound">r</a> <a id="3688" href="fibration.realignment.html#3688" class="Bound">box</a> <a id="3692" href="fibration.realignment.html#3692" class="Bound">s</a> <a id="3694" class="Symbol">→</a>
      <a id="3702" href="fibration.realignment.html#1670" class="Function">RealignLift.fillTotal</a> <a id="3724" class="Symbol">_</a> <a id="3726" class="Symbol">((</a><a id="3728" href="fibration.realignment.html#3660" class="Bound">β</a> <a id="3730" href="fibration.fibration.html#8911" class="Function Operator">↾ᶠˢ</a> <a id="3734" href="fibration.realignment.html#3658" class="Bound">φ</a><a id="3735" class="Symbol">)</a> <a id="3737" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="3741" href="fibration.realignment.html#3684" class="Bound">γ</a><a id="3742" class="Symbol">)</a> <a id="3744" class="Symbol">(</a><a id="3745" href="fibration.realignment.html#3662" class="Bound">α</a> <a id="3747" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="3751" class="Symbol">((</a><a id="3753" href="internal-extensional-type-theory.html#2013" class="Function">𝒑</a> <a id="3755" href="basic.function.html#441" class="Function Operator">∘</a> <a id="3757" href="fibration.realignment.html#3684" class="Bound">γ</a><a id="3758" class="Symbol">)</a> <a id="3760" href="basic.sigma.html#484" class="Function Operator">×id</a><a id="3763" class="Symbol">))</a> <a id="3766" class="Symbol">_</a>
      <a id="3774" class="Symbol">.</a><a id="3775" href="fibration.fibration.html#4400" class="Field">fill</a> <a id="3780" href="fibration.realignment.html#3692" class="Bound">s</a> <a id="3782" class="Symbol">.</a><a id="3783" href="cofibration.html#2035" class="Field">out≡</a> <a id="3788" class="Symbol">(</a><a id="3789" href="axiom.cofibration.html#1696" class="Postulate">∨r</a> <a id="3792" class="Symbol">(</a><a id="3793" href="internal-extensional-type-theory.html#2153" class="Function">𝒒</a> <a id="3795" href="basic.function.html#441" class="Function Operator">∘</a> <a id="3797" href="fibration.realignment.html#3684" class="Bound">γ</a><a id="3798" class="Symbol">))</a>

  <a id="3804" class="Comment">--↓ Realignment commutes with reindexing of fibrations.</a>

  <a id="reindexRealignFibStr"></a><a id="3863" href="fibration.realignment.html#3863" class="Function">reindexRealignFibStr</a> <a id="3884" class="Symbol">:</a> <a id="3886" class="Symbol">{</a><a id="3887" href="fibration.realignment.html#3887" class="Bound">φ</a> <a id="3889" class="Symbol">:</a> <a id="3891" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="3893" class="Symbol">→</a> <a id="3895" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="3898" class="Symbol">}</a>
    <a id="3904" class="Symbol">{</a><a id="3905" href="fibration.realignment.html#3905" class="Bound">B</a> <a id="3907" class="Symbol">:</a> <a id="3909" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="3911" class="Symbol">→</a> <a id="3913" href="basic.prelude.html#227" class="Primitive">Type</a> <a id="3918" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="3919" class="Symbol">}</a> <a id="3921" class="Symbol">{</a><a id="3922" href="fibration.realignment.html#3922" class="Bound">β</a> <a id="3924" class="Symbol">:</a> <a id="3926" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="3933" href="fibration.realignment.html#3905" class="Bound">B</a><a id="3934" class="Symbol">}</a>
    <a id="3940" class="Symbol">{</a><a id="3941" href="fibration.realignment.html#3941" class="Bound">α</a> <a id="3943" class="Symbol">:</a> <a id="3945" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="3952" class="Symbol">(</a><a id="3953" href="fibration.realignment.html#3905" class="Bound">B</a> <a id="3955" href="cofibration.html#783" class="Function Operator">↾</a> <a id="3957" href="fibration.realignment.html#3887" class="Bound">φ</a><a id="3958" class="Symbol">)}</a>
    <a id="3965" class="Symbol">(</a><a id="3966" href="fibration.realignment.html#3966" class="Bound">ρ</a> <a id="3968" class="Symbol">:</a> <a id="3970" href="fibration.realignment.html#479" class="Generalizable">Δ</a> <a id="3972" class="Symbol">→</a> <a id="3974" href="fibration.realignment.html#477" class="Generalizable">Γ</a><a id="3975" class="Symbol">)</a>
    <a id="3981" class="Symbol">→</a> <a id="3983" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="3997" href="fibration.realignment.html#3887" class="Bound">φ</a> <a id="3999" href="fibration.realignment.html#3922" class="Bound">β</a> <a id="4001" href="fibration.realignment.html#3941" class="Bound">α</a> <a id="4003" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="4007" href="fibration.realignment.html#3966" class="Bound">ρ</a> <a id="4009" href="basic.prelude.html#239" class="Datatype Operator">≡</a> <a id="4011" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="4025" class="Symbol">(</a><a id="4026" href="fibration.realignment.html#3887" class="Bound">φ</a> <a id="4028" href="basic.function.html#441" class="Function Operator">∘</a> <a id="4030" href="fibration.realignment.html#3966" class="Bound">ρ</a><a id="4031" class="Symbol">)</a> <a id="4033" class="Symbol">(</a><a id="4034" href="fibration.realignment.html#3922" class="Bound">β</a> <a id="4036" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="4040" href="fibration.realignment.html#3966" class="Bound">ρ</a><a id="4041" class="Symbol">)</a> <a id="4043" class="Symbol">(</a><a id="4044" href="fibration.realignment.html#3941" class="Bound">α</a> <a id="4046" href="fibration.fibration.html#8536" class="Function Operator">∘ᶠˢ</a> <a id="4050" href="fibration.realignment.html#3966" class="Bound">ρ</a> <a id="4052" href="basic.sigma.html#484" class="Function Operator">×id</a><a id="4055" class="Symbol">)</a>
  <a id="4059" href="fibration.realignment.html#3863" class="Function">reindexRealignFibStr</a> <a id="4080" href="fibration.realignment.html#4080" class="Bound">ρ</a> <a id="4082" class="Symbol">=</a> <a id="4084" href="fibration.fibration.html#11433" class="Function">FibStrExt</a> <a id="4094" class="Symbol">λ</a> <a id="4096" href="fibration.realignment.html#4096" class="Bound">S</a> <a id="4098" href="fibration.realignment.html#4098" class="Bound">r</a> <a id="4100" href="fibration.realignment.html#4100" class="Bound">γ</a> <a id="4102" href="fibration.realignment.html#4102" class="Bound">box</a> <a id="4106" href="fibration.realignment.html#4106" class="Bound">s</a> <a id="4108" class="Symbol">→</a> <a id="4110" href="basic.prelude.html#302" class="InductiveConstructor">refl</a>

<a id="4116" class="Comment">------------------------------------------------------------------------------------------</a>
<a id="4207" class="Comment">-- Realignment for fibrations along cofibrations.</a>
<a id="4257" class="Comment">--</a>
<a id="4260" class="Comment">-- Given</a>
<a id="4269" class="Comment">--</a>
<a id="4272" class="Comment">-- ∘ a &quot;total&quot; fibration B over Γ,</a>
<a id="4307" class="Comment">-- ∘ a cofibration φ over Γ,</a>
<a id="4336" class="Comment">-- ∘ a &quot;partial&quot; fibration A over the restricted context Γ ▷[ φ ] such that A is</a>
<a id="4417" class="Comment">--   (strictly) isomorphic to B ↾ φ,</a>
<a id="4454" class="Comment">--</a>
<a id="4457" class="Comment">-- there exists a fibration over Γ that is (strictly) isomorphic to B and restricts on φ</a>
<a id="4546" class="Comment">-- to A (up to strict equality).</a>
<a id="4579" class="Comment">------------------------------------------------------------------------------------------</a>

<a id="4671" class="Keyword">opaque</a>
  <a id="4680" class="Comment">--↓ Construction of the realigned fibration.</a>

  <a id="≅Realignᶠ"></a><a id="4728" href="fibration.realignment.html#4728" class="Function">≅Realignᶠ</a> <a id="4738" class="Symbol">:</a> <a id="4740" class="Symbol">(</a><a id="4741" href="fibration.realignment.html#4741" class="Bound">φ</a> <a id="4743" class="Symbol">:</a> <a id="4745" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="4747" class="Symbol">→</a> <a id="4749" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="4752" class="Symbol">)</a>
    <a id="4758" class="Symbol">(</a><a id="4759" href="fibration.realignment.html#4759" class="Bound">B</a> <a id="4761" class="Symbol">:</a> <a id="4763" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="4765" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="4772" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="4773" class="Symbol">)</a>
    <a id="4779" class="Symbol">(</a><a id="4780" href="fibration.realignment.html#4780" class="Bound">A</a> <a id="4782" class="Symbol">:</a> <a id="4784" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="4786" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="4789" href="fibration.realignment.html#4741" class="Bound">φ</a> <a id="4791" href="cofibration.html#671" class="Function Operator">]</a> <a id="4793" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="4800" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="4801" class="Symbol">)</a>
    <a id="4807" class="Symbol">(</a><a id="4808" href="fibration.realignment.html#4808" class="Bound">iso</a> <a id="4812" class="Symbol">:</a> <a id="4814" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="4816" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="4819" href="fibration.realignment.html#4741" class="Bound">φ</a> <a id="4821" href="cofibration.html#671" class="Function Operator">]</a> <a id="4823" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="4826" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="4828" href="fibration.realignment.html#4780" class="Bound">A</a> <a id="4830" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="4832" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="4835" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="4837" href="fibration.realignment.html#4759" class="Bound">B</a> <a id="4839" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="4842" href="fibration.realignment.html#4741" class="Bound">φ</a> <a id="4844" href="fibration.fibration.html#7817" class="Function Operator">∣</a><a id="4845" class="Symbol">)</a>
    <a id="4851" class="Symbol">→</a> <a id="4853" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="4855" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="4862" href="fibration.realignment.html#465" class="Generalizable">ℓ</a>
  <a id="4866" href="fibration.realignment.html#4728" class="Function">≅Realignᶠ</a> <a id="4876" href="fibration.realignment.html#4876" class="Bound">φ</a> <a id="4878" class="Symbol">_</a> <a id="4880" class="Symbol">_</a> <a id="4882" href="fibration.realignment.html#4882" class="Bound">iso</a> <a id="4886" class="Symbol">.</a><a id="4887" href="basic.sigma.html#281" class="Field">fst</a> <a id="4891" href="fibration.realignment.html#4891" class="Bound">γ</a> <a id="4893" class="Symbol">=</a> <a id="4895" href="axiom.realignment.html#541" class="Function">≅Realign</a> <a id="4904" class="Symbol">(</a><a id="4905" href="fibration.realignment.html#4876" class="Bound">φ</a> <a id="4907" href="fibration.realignment.html#4891" class="Bound">γ</a><a id="4908" class="Symbol">)</a> <a id="4910" class="Symbol">(</a><a id="4911" href="fibration.realignment.html#4882" class="Bound">iso</a> <a id="4915" href="basic.function.html#441" class="Function Operator">∘</a> <a id="4917" class="Symbol">(</a><a id="4918" href="fibration.realignment.html#4891" class="Bound">γ</a> <a id="4920" href="basic.sigma.html#265" class="InductiveConstructor Operator">,_</a><a id="4922" class="Symbol">))</a>
  <a id="4927" href="fibration.realignment.html#4728" class="Function">≅Realignᶠ</a> <a id="4937" href="fibration.realignment.html#4937" class="Bound">φ</a> <a id="4939" class="Symbol">(_</a> <a id="4942" href="basic.sigma.html#265" class="InductiveConstructor Operator">,</a> <a id="4944" href="fibration.realignment.html#4944" class="Bound">β</a><a id="4945" class="Symbol">)</a> <a id="4947" class="Symbol">(_</a> <a id="4950" href="basic.sigma.html#265" class="InductiveConstructor Operator">,</a> <a id="4952" href="fibration.realignment.html#4952" class="Bound">α</a><a id="4953" class="Symbol">)</a> <a id="4955" href="fibration.realignment.html#4955" class="Bound">iso</a> <a id="4959" class="Symbol">.</a><a id="4960" href="basic.sigma.html#293" class="Field">snd</a> <a id="4964" class="Symbol">=</a>
    <a id="4970" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="4984" href="fibration.realignment.html#4937" class="Bound">φ</a>
      <a id="4992" class="Symbol">(</a><a id="4993" href="fibration.fibration.html#14451" class="Function">isomorphFibStr</a> <a id="5008" class="Symbol">(λ</a> <a id="5011" href="fibration.realignment.html#5011" class="Bound">γ</a> <a id="5013" class="Symbol">→</a> <a id="5015" href="axiom.realignment.html#684" class="Function">≅realign</a> <a id="5024" class="Symbol">(</a><a id="5025" href="fibration.realignment.html#4937" class="Bound">φ</a> <a id="5027" href="fibration.realignment.html#5011" class="Bound">γ</a><a id="5028" class="Symbol">)</a> <a id="5030" class="Symbol">(</a><a id="5031" href="fibration.realignment.html#4955" class="Bound">iso</a> <a id="5035" href="basic.function.html#441" class="Function Operator">∘</a> <a id="5037" class="Symbol">(</a><a id="5038" href="fibration.realignment.html#5011" class="Bound">γ</a> <a id="5040" href="basic.sigma.html#265" class="InductiveConstructor Operator">,_</a><a id="5042" class="Symbol">)))</a> <a id="5046" href="fibration.realignment.html#4944" class="Bound">β</a><a id="5047" class="Symbol">)</a>
      <a id="5055" class="Symbol">(</a><a id="5056" href="basic.equality.html#1232" class="Function">subst</a> <a id="5062" href="fibration.fibration.html#7152" class="Record">FibStr</a> <a id="5069" class="Symbol">(</a><a id="5070" href="axiom.funext.html#353" class="Postulate">funExt</a> <a id="5077" class="Symbol">(</a><a id="5078" href="basic.sigma.html#1178" class="Function">uncurry</a> <a id="5086" class="Symbol">λ</a> <a id="5088" href="fibration.realignment.html#5088" class="Bound">γ</a> <a id="5090" class="Symbol">→</a> <a id="5092" href="axiom.realignment.html#837" class="Function">≅RealignMatch</a> <a id="5106" class="Symbol">(</a><a id="5107" href="fibration.realignment.html#4937" class="Bound">φ</a> <a id="5109" href="fibration.realignment.html#5088" class="Bound">γ</a><a id="5110" class="Symbol">)</a> <a id="5112" class="Symbol">(</a><a id="5113" href="fibration.realignment.html#4955" class="Bound">iso</a> <a id="5117" href="basic.function.html#441" class="Function Operator">∘</a> <a id="5119" class="Symbol">(</a><a id="5120" href="fibration.realignment.html#5088" class="Bound">γ</a> <a id="5122" href="basic.sigma.html#265" class="InductiveConstructor Operator">,_</a><a id="5124" class="Symbol">))))</a> <a id="5129" href="fibration.realignment.html#4952" class="Bound">α</a><a id="5130" class="Symbol">)</a>

  <a id="5135" class="Comment">--↓ Proof that the realigned fibration restricts to the input partial fibration.</a>

  <a id="≅RealignᶠMatch"></a><a id="5219" href="fibration.realignment.html#5219" class="Function">≅RealignᶠMatch</a> <a id="5234" class="Symbol">:</a> <a id="5236" class="Symbol">(</a><a id="5237" href="fibration.realignment.html#5237" class="Bound">φ</a> <a id="5239" class="Symbol">:</a> <a id="5241" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5243" class="Symbol">→</a> <a id="5245" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="5248" class="Symbol">)</a>
    <a id="5254" class="Symbol">(</a><a id="5255" href="fibration.realignment.html#5255" class="Bound">B</a> <a id="5257" class="Symbol">:</a> <a id="5259" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5261" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="5268" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="5269" class="Symbol">)</a>
    <a id="5275" class="Symbol">(</a><a id="5276" href="fibration.realignment.html#5276" class="Bound">A</a> <a id="5278" class="Symbol">:</a> <a id="5280" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5282" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="5285" href="fibration.realignment.html#5237" class="Bound">φ</a> <a id="5287" href="cofibration.html#671" class="Function Operator">]</a> <a id="5289" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="5296" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="5297" class="Symbol">)</a>
    <a id="5303" class="Symbol">(</a><a id="5304" href="fibration.realignment.html#5304" class="Bound">iso</a> <a id="5308" class="Symbol">:</a> <a id="5310" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5312" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="5315" href="fibration.realignment.html#5237" class="Bound">φ</a> <a id="5317" href="cofibration.html#671" class="Function Operator">]</a> <a id="5319" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="5322" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5324" href="fibration.realignment.html#5276" class="Bound">A</a> <a id="5326" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5328" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="5331" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5333" href="fibration.realignment.html#5255" class="Bound">B</a> <a id="5335" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="5338" href="fibration.realignment.html#5237" class="Bound">φ</a> <a id="5340" href="fibration.fibration.html#7817" class="Function Operator">∣</a><a id="5341" class="Symbol">)</a>
    <a id="5347" class="Symbol">→</a> <a id="5349" href="fibration.realignment.html#5276" class="Bound">A</a> <a id="5351" href="basic.prelude.html#239" class="Datatype Operator">≡</a> <a id="5353" href="fibration.realignment.html#4728" class="Function">≅Realignᶠ</a> <a id="5363" href="fibration.realignment.html#5237" class="Bound">φ</a> <a id="5365" href="fibration.realignment.html#5255" class="Bound">B</a> <a id="5367" href="fibration.realignment.html#5276" class="Bound">A</a> <a id="5369" href="fibration.realignment.html#5304" class="Bound">iso</a> <a id="5373" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="5376" href="fibration.realignment.html#5237" class="Bound">φ</a>
  <a id="5380" href="fibration.realignment.html#5219" class="Function">≅RealignᶠMatch</a> <a id="5395" class="Symbol">_</a> <a id="5397" class="Symbol">_</a> <a id="5399" class="Symbol">_</a> <a id="5401" class="Symbol">_</a> <a id="5403" class="Symbol">=</a>
    <a id="5409" href="basic.sigma.html#676" class="Function">Σext</a> <a id="5414" class="Symbol">_</a> <a id="5416" class="Symbol">(</a><a id="5417" href="fibration.realignment.html#3505" class="Function">realignFibStrMatch</a> <a id="5436" class="Symbol">_</a> <a id="5438" class="Symbol">_</a> <a id="5440" class="Symbol">_)</a>

  <a id="5446" class="Comment">--↓ Isomorphism from the input total fibration to the realigned fibration.</a>

  <a id="≅realignᶠ"></a><a id="5524" href="fibration.realignment.html#5524" class="Function">≅realignᶠ</a> <a id="5534" class="Symbol">:</a> <a id="5536" class="Symbol">(</a><a id="5537" href="fibration.realignment.html#5537" class="Bound">φ</a> <a id="5539" class="Symbol">:</a> <a id="5541" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5543" class="Symbol">→</a> <a id="5545" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="5548" class="Symbol">)</a>
    <a id="5554" class="Symbol">(</a><a id="5555" href="fibration.realignment.html#5555" class="Bound">B</a> <a id="5557" class="Symbol">:</a> <a id="5559" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5561" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="5568" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="5569" class="Symbol">)</a>
    <a id="5575" class="Symbol">(</a><a id="5576" href="fibration.realignment.html#5576" class="Bound">A</a> <a id="5578" class="Symbol">:</a> <a id="5580" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5582" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="5585" href="fibration.realignment.html#5537" class="Bound">φ</a> <a id="5587" href="cofibration.html#671" class="Function Operator">]</a> <a id="5589" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="5596" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="5597" class="Symbol">)</a>
    <a id="5603" class="Symbol">(</a><a id="5604" href="fibration.realignment.html#5604" class="Bound">iso</a> <a id="5608" class="Symbol">:</a> <a id="5610" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5612" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="5615" href="fibration.realignment.html#5537" class="Bound">φ</a> <a id="5617" href="cofibration.html#671" class="Function Operator">]</a> <a id="5619" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="5622" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5624" href="fibration.realignment.html#5576" class="Bound">A</a> <a id="5626" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5628" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="5631" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5633" href="fibration.realignment.html#5555" class="Bound">B</a> <a id="5635" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="5638" href="fibration.realignment.html#5537" class="Bound">φ</a> <a id="5640" href="fibration.fibration.html#7817" class="Function Operator">∣</a><a id="5641" class="Symbol">)</a>
    <a id="5647" class="Symbol">→</a> <a id="5649" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5651" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="5654" href="fibration.realignment.html#4728" class="Function">≅Realignᶠ</a> <a id="5664" href="fibration.realignment.html#5537" class="Bound">φ</a> <a id="5666" href="fibration.realignment.html#5555" class="Bound">B</a> <a id="5668" href="fibration.realignment.html#5576" class="Bound">A</a> <a id="5670" href="fibration.realignment.html#5604" class="Bound">iso</a> <a id="5674" class="Symbol">.</a><a id="5675" href="basic.sigma.html#281" class="Field">fst</a> <a id="5679" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="5682" href="fibration.realignment.html#5555" class="Bound">B</a> <a id="5684" class="Symbol">.</a><a id="5685" href="basic.sigma.html#281" class="Field">fst</a>
  <a id="5691" href="fibration.realignment.html#5524" class="Function">≅realignᶠ</a> <a id="5701" href="fibration.realignment.html#5701" class="Bound">φ</a> <a id="5703" href="fibration.realignment.html#5703" class="Bound">B</a> <a id="5705" href="fibration.realignment.html#5705" class="Bound">A</a> <a id="5707" href="fibration.realignment.html#5707" class="Bound">iso</a> <a id="5711" href="fibration.realignment.html#5711" class="Bound">γ</a> <a id="5713" class="Symbol">=</a> <a id="5715" href="axiom.realignment.html#684" class="Function">≅realign</a> <a id="5724" class="Symbol">_</a> <a id="5726" class="Symbol">_</a>

  <a id="5731" class="Comment">--↓ Proof that the isomorphism above restricts to the input isomorphism.</a>

  <a id="≅realignᶠMatch"></a><a id="5807" href="fibration.realignment.html#5807" class="Function">≅realignᶠMatch</a> <a id="5822" class="Symbol">:</a> <a id="5824" class="Symbol">(</a><a id="5825" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="5827" class="Symbol">:</a> <a id="5829" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5831" class="Symbol">→</a> <a id="5833" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="5836" class="Symbol">)</a>
    <a id="5842" class="Symbol">(</a><a id="5843" href="fibration.realignment.html#5843" class="Bound">B</a> <a id="5845" class="Symbol">:</a> <a id="5847" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5849" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="5856" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="5857" class="Symbol">)</a>
    <a id="5863" class="Symbol">(</a><a id="5864" href="fibration.realignment.html#5864" class="Bound">A</a> <a id="5866" class="Symbol">:</a> <a id="5868" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5870" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="5873" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="5875" href="cofibration.html#671" class="Function Operator">]</a> <a id="5877" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="5884" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="5885" class="Symbol">)</a>
    <a id="5891" class="Symbol">(</a><a id="5892" href="fibration.realignment.html#5892" class="Bound">iso</a> <a id="5896" class="Symbol">:</a> <a id="5898" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5900" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="5903" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="5905" href="cofibration.html#671" class="Function Operator">]</a> <a id="5907" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="5910" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5912" href="fibration.realignment.html#5864" class="Bound">A</a> <a id="5914" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5916" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="5919" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5921" href="fibration.realignment.html#5843" class="Bound">B</a> <a id="5923" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="5926" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="5928" href="fibration.fibration.html#7817" class="Function Operator">∣</a><a id="5929" class="Symbol">)</a>
    <a id="5935" class="Symbol">→</a> <a id="5937" href="basic.equality.html#1232" class="Function">subst</a> <a id="5943" class="Symbol">(λ</a> <a id="5946" href="fibration.realignment.html#5946" class="Bound">C</a> <a id="5948" class="Symbol">→</a> <a id="5950" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="5952" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="5955" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="5957" href="cofibration.html#671" class="Function Operator">]</a> <a id="5959" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="5962" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5964" href="fibration.realignment.html#5946" class="Bound">C</a> <a id="5966" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5968" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="5971" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="5973" href="fibration.realignment.html#5843" class="Bound">B</a> <a id="5975" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="5978" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="5980" href="fibration.fibration.html#7817" class="Function Operator">∣</a><a id="5981" class="Symbol">)</a> <a id="5983" class="Symbol">(</a><a id="5984" href="fibration.realignment.html#5219" class="Function">≅RealignᶠMatch</a> <a id="5999" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="6001" href="fibration.realignment.html#5843" class="Bound">B</a> <a id="6003" href="fibration.realignment.html#5864" class="Bound">A</a> <a id="6005" href="fibration.realignment.html#5892" class="Bound">iso</a><a id="6008" class="Symbol">)</a> <a id="6010" href="fibration.realignment.html#5892" class="Bound">iso</a>
      <a id="6020" href="basic.prelude.html#239" class="Datatype Operator">≡</a> <a id="6022" href="fibration.realignment.html#5524" class="Function">≅realignᶠ</a> <a id="6032" href="fibration.realignment.html#5825" class="Bound">φ</a> <a id="6034" href="fibration.realignment.html#5843" class="Bound">B</a> <a id="6036" href="fibration.realignment.html#5864" class="Bound">A</a> <a id="6038" href="fibration.realignment.html#5892" class="Bound">iso</a> <a id="6042" href="cofibration.html#783" class="Function Operator">↾</a> <a id="6044" href="fibration.realignment.html#5825" class="Bound">φ</a>
  <a id="6048" href="fibration.realignment.html#5807" class="Function">≅realignᶠMatch</a> <a id="6063" href="fibration.realignment.html#6063" class="Bound">φ</a> <a id="6065" href="fibration.realignment.html#6065" class="Bound">B</a> <a id="6067" href="fibration.realignment.html#6067" class="Bound">A</a> <a id="6069" href="fibration.realignment.html#6069" class="Bound">iso</a> <a id="6073" class="Symbol">=</a>
    <a id="6079" href="axiom.funext.html#353" class="Postulate">funExt</a> <a id="6086" class="Symbol">λ</a> <a id="6088" class="Symbol">(</a><a id="6089" href="fibration.realignment.html#6089" class="Bound">γ</a> <a id="6091" href="basic.sigma.html#265" class="InductiveConstructor Operator">,</a> <a id="6093" href="fibration.realignment.html#6093" class="Bound">u</a><a id="6094" class="Symbol">)</a> <a id="6096" class="Symbol">→</a>
    <a id="6102" href="basic.equality.html#3678" class="Function">substNaturality</a> <a id="6118" class="Symbol">{</a><a id="6119" class="Argument">B</a> <a id="6121" class="Symbol">=</a> <a id="6123" class="Symbol">λ</a> <a id="6125" href="fibration.realignment.html#6125" class="Bound">C</a> <a id="6127" class="Symbol">→</a> <a id="6129" class="Symbol">_</a> <a id="6131" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="6134" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="6136" href="fibration.realignment.html#6125" class="Bound">C</a> <a id="6138" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="6140" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="6143" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="6145" href="fibration.realignment.html#6065" class="Bound">B</a> <a id="6147" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="6150" href="fibration.realignment.html#6063" class="Bound">φ</a> <a id="6152" href="fibration.fibration.html#7817" class="Function Operator">∣</a><a id="6153" class="Symbol">}</a> <a id="6155" class="Symbol">(</a><a id="6156" href="basic.function.html#647" class="Function Operator">_$</a> <a id="6159" class="Symbol">(</a><a id="6160" href="fibration.realignment.html#6089" class="Bound">γ</a> <a id="6162" href="basic.sigma.html#265" class="InductiveConstructor Operator">,</a> <a id="6164" href="fibration.realignment.html#6093" class="Bound">u</a><a id="6165" class="Symbol">))</a>
      <a id="6174" class="Symbol">(</a><a id="6175" href="fibration.realignment.html#5219" class="Function">≅RealignᶠMatch</a> <a id="6190" href="fibration.realignment.html#6063" class="Bound">φ</a> <a id="6192" href="fibration.realignment.html#6065" class="Bound">B</a> <a id="6194" href="fibration.realignment.html#6067" class="Bound">A</a> <a id="6196" href="fibration.realignment.html#6069" class="Bound">iso</a><a id="6199" class="Symbol">)</a>
    <a id="6205" href="basic.equality.html#1002" class="Function Operator">∙</a> <a id="6207" href="basic.equality.html#2853" class="Function">substCongAssoc</a> <a id="6222" class="Symbol">(λ</a> <a id="6225" href="fibration.realignment.html#6225" class="Bound">C</a> <a id="6227" class="Symbol">→</a> <a id="6229" href="fibration.realignment.html#6225" class="Bound">C</a> <a id="6231" href="basic.isomorphism.html#272" class="Record Operator">≅</a> <a id="6233" href="fibration.realignment.html#6065" class="Bound">B</a> <a id="6235" href="fibration.fibration.html#7867" class="Function Operator">$ᶠ</a> <a id="6238" href="fibration.realignment.html#6089" class="Bound">γ</a><a id="6239" class="Symbol">)</a> <a id="6241" class="Symbol">(</a><a id="6242" href="fibration.fibration.html#7867" class="Function Operator">_$ᶠ</a> <a id="6246" class="Symbol">(</a><a id="6247" href="fibration.realignment.html#6089" class="Bound">γ</a> <a id="6249" href="basic.sigma.html#265" class="InductiveConstructor Operator">,</a> <a id="6251" href="fibration.realignment.html#6093" class="Bound">u</a><a id="6252" class="Symbol">))</a> <a id="6255" class="Symbol">(</a><a id="6256" href="fibration.realignment.html#5219" class="Function">≅RealignᶠMatch</a> <a id="6271" href="fibration.realignment.html#6063" class="Bound">φ</a> <a id="6273" href="fibration.realignment.html#6065" class="Bound">B</a> <a id="6275" href="fibration.realignment.html#6067" class="Bound">A</a> <a id="6277" href="fibration.realignment.html#6069" class="Bound">iso</a><a id="6280" class="Symbol">)</a> <a id="6282" class="Symbol">_</a>
    <a id="6288" href="basic.equality.html#1002" class="Function Operator">∙</a> <a id="6290" href="basic.equality.html#1460" class="Function">cong</a> <a id="6295" class="Symbol">(</a><a id="6296" href="basic.equality.html#1232" class="Function">subst</a> <a id="6302" class="Symbol">(</a><a id="6303" href="basic.isomorphism.html#272" class="Record Operator">_≅</a> <a id="6306" href="fibration.realignment.html#6065" class="Bound">B</a> <a id="6308" href="fibration.fibration.html#7867" class="Function Operator">$ᶠ</a> <a id="6311" href="fibration.realignment.html#6089" class="Bound">γ</a><a id="6312" class="Symbol">)</a> <a id="6314" href="basic.function.html#777" class="Function Operator">⦅–⦆</a> <a id="6318" class="Symbol">(</a><a id="6319" href="fibration.realignment.html#6069" class="Bound">iso</a> <a id="6323" class="Symbol">(</a><a id="6324" href="fibration.realignment.html#6089" class="Bound">γ</a> <a id="6326" href="basic.sigma.html#265" class="InductiveConstructor Operator">,</a> <a id="6328" href="fibration.realignment.html#6093" class="Bound">u</a><a id="6329" class="Symbol">)))</a> <a id="6333" href="basic.equality.html#692" class="Function">uip&#39;</a>
    <a id="6342" href="basic.equality.html#1002" class="Function Operator">∙</a> <a id="6344" href="axiom.realignment.html#1019" class="Function">≅realignMatch</a> <a id="6358" class="Symbol">(</a><a id="6359" href="fibration.realignment.html#6063" class="Bound">φ</a> <a id="6361" href="fibration.realignment.html#6089" class="Bound">γ</a><a id="6362" class="Symbol">)</a> <a id="6364" class="Symbol">(</a><a id="6365" href="fibration.realignment.html#6069" class="Bound">iso</a> <a id="6369" href="basic.function.html#441" class="Function Operator">∘</a> <a id="6371" class="Symbol">(</a><a id="6372" href="fibration.realignment.html#6089" class="Bound">γ</a> <a id="6374" href="basic.sigma.html#265" class="InductiveConstructor Operator">,_</a><a id="6376" class="Symbol">))</a> <a id="6379" href="fibration.realignment.html#6093" class="Bound">u</a>

  <a id="6384" class="Comment">--↓ Realignment commmutes with reindexing.</a>

  <a id="reindexRealignᶠ"></a><a id="6430" href="fibration.realignment.html#6430" class="Function">reindexRealignᶠ</a> <a id="6446" class="Symbol">:</a> <a id="6448" class="Symbol">{</a><a id="6449" href="fibration.realignment.html#6449" class="Bound">φ</a> <a id="6451" class="Symbol">:</a> <a id="6453" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="6455" class="Symbol">→</a> <a id="6457" href="axiom.cofibration.html#543" class="Postulate">Cof</a><a id="6460" class="Symbol">}</a>
    <a id="6466" class="Symbol">{</a><a id="6467" href="fibration.realignment.html#6467" class="Bound">B</a> <a id="6469" class="Symbol">:</a> <a id="6471" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="6473" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="6480" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="6481" class="Symbol">}</a>
    <a id="6487" class="Symbol">{</a><a id="6488" href="fibration.realignment.html#6488" class="Bound">A</a> <a id="6490" class="Symbol">:</a> <a id="6492" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="6494" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="6497" href="fibration.realignment.html#6449" class="Bound">φ</a> <a id="6499" href="cofibration.html#671" class="Function Operator">]</a> <a id="6501" href="fibration.fibration.html#7526" class="Function Operator">⊢ᶠType</a> <a id="6508" href="fibration.realignment.html#465" class="Generalizable">ℓ</a><a id="6509" class="Symbol">}</a>
    <a id="6515" class="Symbol">{</a><a id="6516" href="fibration.realignment.html#6516" class="Bound">iso</a> <a id="6520" class="Symbol">:</a> <a id="6522" href="fibration.realignment.html#477" class="Generalizable">Γ</a> <a id="6524" href="cofibration.html#671" class="Function Operator">▷[</a> <a id="6527" href="fibration.realignment.html#6449" class="Bound">φ</a> <a id="6529" href="cofibration.html#671" class="Function Operator">]</a> <a id="6531" href="internal-extensional-type-theory.html#1372" class="Function Operator">⊢ˣ</a> <a id="6534" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="6536" href="fibration.realignment.html#6488" class="Bound">A</a> <a id="6538" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="6540" href="internal-extensional-type-theory.html#3735" class="Function Operator">≅ˣ</a> <a id="6543" href="fibration.fibration.html#7817" class="Function Operator">∣</a> <a id="6545" href="fibration.realignment.html#6467" class="Bound">B</a> <a id="6547" href="fibration.fibration.html#9003" class="Function Operator">↾ᶠ</a> <a id="6550" href="fibration.realignment.html#6449" class="Bound">φ</a> <a id="6552" href="fibration.fibration.html#7817" class="Function Operator">∣</a><a id="6553" class="Symbol">}</a>
    <a id="6559" class="Symbol">(</a><a id="6560" href="fibration.realignment.html#6560" class="Bound">ρ</a> <a id="6562" class="Symbol">:</a> <a id="6564" href="fibration.realignment.html#479" class="Generalizable">Δ</a> <a id="6566" class="Symbol">→</a> <a id="6568" href="fibration.realignment.html#477" class="Generalizable">Γ</a><a id="6569" class="Symbol">)</a>
    <a id="6575" class="Symbol">→</a> <a id="6577" href="fibration.realignment.html#4728" class="Function">≅Realignᶠ</a> <a id="6587" href="fibration.realignment.html#6449" class="Bound">φ</a> <a id="6589" href="fibration.realignment.html#6467" class="Bound">B</a> <a id="6591" href="fibration.realignment.html#6488" class="Bound">A</a> <a id="6593" href="fibration.realignment.html#6516" class="Bound">iso</a> <a id="6597" href="fibration.fibration.html#8733" class="Function Operator">∘ᶠ</a> <a id="6600" href="fibration.realignment.html#6560" class="Bound">ρ</a> <a id="6602" href="basic.prelude.html#239" class="Datatype Operator">≡</a> <a id="6604" href="fibration.realignment.html#4728" class="Function">≅Realignᶠ</a> <a id="6614" class="Symbol">(</a><a id="6615" href="fibration.realignment.html#6449" class="Bound">φ</a> <a id="6617" href="basic.function.html#441" class="Function Operator">∘</a> <a id="6619" href="fibration.realignment.html#6560" class="Bound">ρ</a><a id="6620" class="Symbol">)</a> <a id="6622" class="Symbol">(</a><a id="6623" href="fibration.realignment.html#6467" class="Bound">B</a> <a id="6625" href="fibration.fibration.html#8733" class="Function Operator">∘ᶠ</a> <a id="6628" href="fibration.realignment.html#6560" class="Bound">ρ</a><a id="6629" class="Symbol">)</a> <a id="6631" class="Symbol">(</a><a id="6632" href="fibration.realignment.html#6488" class="Bound">A</a> <a id="6634" href="fibration.fibration.html#8733" class="Function Operator">∘ᶠ</a> <a id="6637" href="fibration.realignment.html#6560" class="Bound">ρ</a> <a id="6639" href="basic.sigma.html#484" class="Function Operator">×id</a><a id="6642" class="Symbol">)</a> <a id="6644" class="Symbol">(</a><a id="6645" href="fibration.realignment.html#6516" class="Bound">iso</a> <a id="6649" href="basic.function.html#441" class="Function Operator">∘</a> <a id="6651" href="fibration.realignment.html#6560" class="Bound">ρ</a> <a id="6653" href="basic.sigma.html#484" class="Function Operator">×id</a><a id="6656" class="Symbol">)</a>
  <a id="6660" href="fibration.realignment.html#6430" class="Function">reindexRealignᶠ</a> <a id="6676" class="Symbol">{</a><a id="6677" class="Argument">A</a> <a id="6679" class="Symbol">=</a> <a id="6681" class="Symbol">_</a> <a id="6683" href="basic.sigma.html#265" class="InductiveConstructor Operator">,</a> <a id="6685" href="fibration.realignment.html#6685" class="Bound">α</a><a id="6686" class="Symbol">}</a> <a id="6688" href="fibration.realignment.html#6688" class="Bound">ρ</a> <a id="6690" class="Symbol">=</a>
    <a id="6696" href="basic.sigma.html#676" class="Function">Σext</a> <a id="6701" href="basic.prelude.html#302" class="InductiveConstructor">refl</a>
      <a id="6712" class="Symbol">(</a><a id="6713" href="fibration.realignment.html#3863" class="Function">reindexRealignFibStr</a> <a id="6734" class="Symbol">_</a>
        <a id="6744" href="basic.equality.html#1002" class="Function Operator">∙</a> <a id="6746" href="basic.equality.html#1610" class="Function">cong₂</a> <a id="6752" class="Symbol">(</a><a id="6753" href="fibration.realignment.html#3095" class="Function">realignFibStr</a> <a id="6767" class="Symbol">_)</a>
            <a id="6782" class="Symbol">(</a><a id="6783" href="fibration.fibration.html#14642" class="Function">reindexIsomorphFibStr</a> <a id="6805" class="Symbol">(λ</a> <a id="6808" href="fibration.realignment.html#6808" class="Bound">_</a> <a id="6810" class="Symbol">→</a> <a id="6812" href="axiom.realignment.html#684" class="Function">≅realign</a> <a id="6821" class="Symbol">_</a> <a id="6823" class="Symbol">_)</a> <a id="6826" class="Symbol">_)</a>
            <a id="6841" class="Symbol">(</a><a id="6842" href="fibration.fibration.html#9154" class="Function">reindexSubst</a> <a id="6855" href="fibration.realignment.html#6685" class="Bound">α</a> <a id="6857" class="Symbol">_</a> <a id="6859" class="Symbol">_</a> <a id="6861" class="Symbol">_))</a>
</pre></body></html>